class e extends Error{}function t(t,r){if("string"!=typeof t)throw new e("Invalid token specified: must be a string");r||(r={});const n=!0===r.header?0:1,a=t.split(".")[n];if("string"!=typeof a)throw new e(`Invalid token specified: missing part #${n+1}`);let o;try{o=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(t)}catch(r){return atob(t)}}(a)}catch(i){throw new e(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(o)}catch(i){throw new e(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}e.prototype.name="InvalidTokenError";export{t as j};
