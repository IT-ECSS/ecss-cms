var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=Math.pow,u=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&u(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&u(e,n,t[n]);return e},l=(e,t,n)=>new Promise((r,i)=>{var o=e=>{try{u(n.next(e))}catch(t){i(t)}},s=e=>{try{u(n.throw(e))}catch(t){i(t)}},u=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);u((n=n.apply(e,t)).next())});import{c as a,m as d,P as h,i as y,U as w,n as f,a as p,J as g,b as m,d as b,e as v,f as K,g as S,K as k,u as U,h as C,j as P,k as A,l as O,A as E,o as T,p as G,q as x,r as J}from"./microsoft-vendor-CGcXpP-m.js";
/*! @azure/msal-common v15.6.0 2025-05-06 */const M={createNewGuid:()=>{throw a(d)},base64Decode:()=>{throw a(d)},base64Encode:()=>{throw a(d)},base64UrlEncode:()=>{throw a(d)},encodeKid:()=>{throw a(d)},getPublicKeyThumbprint(){return l(this,null,function*(){throw a(d)})},removeTokenBindingKey(){return l(this,null,function*(){throw a(d)})},clearKeystore(){return l(this,null,function*(){throw a(d)})},signJwt(){return l(this,null,function*(){throw a(d)})},hashString(){return l(this,null,function*(){throw a(d)})}},N="sw";
/*! @azure/msal-common v15.6.0 2025-05-06 */class j{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return l(this,null,function*(){var n;null==(n=this.performanceClient)||n.addQueueMeasurement(h.PopTokenGenerateCnf,e.correlationId);const r=yield y(this.generateKid.bind(this),h.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:i}})}generateKid(e){return l(this,null,function*(){var t;null==(t=this.performanceClient)||t.addQueueMeasurement(h.PopTokenGenerateKid,e.correlationId);return{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:N}})}signPopToken(e,t,n){return l(this,null,function*(){return this.signPayload(e,t,n)})}signPayload(e,t,n,r){return l(this,null,function*(){const{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:s,shrNonce:u,shrOptions:l}=n,a=o?new w(o):void 0,d=null==a?void 0:a.getUrlComponents();return this.cryptoUtils.signJwt(c({at:e,ts:f(),m:null==i?void 0:i.toUpperCase(),u:null==d?void 0:d.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:null==d?void 0:d.AbsolutePath,q:(null==d?void 0:d.QueryString)?[[],d.QueryString]:void 0,client_claims:s||void 0},r),t,l,n.correlationId)})}}
/*! @azure/msal-common v15.6.0 2025-05-06 */class D{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw p(m);if(!e.alg)throw p(b);const t=new D({typ:e.typ||g.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}
/*! @azure/msal-browser v4.12.0 2025-05-06 */const R="AES-GCM",_="HKDF",I="SHA-256",q=new Uint8Array([1,0,1]),Q="0123456789abcdef",V=new Uint32Array(1),H="raw",L="encrypt",$="decrypt",B={name:"RSASSA-PKCS1-v1_5",hash:I,modulusLength:2048,publicExponent:q};function F(e,t,n){return l(this,null,function*(){null==t||t.addQueueMeasurement(h.Sha256Digest,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(I,r)})}function X(e){return window.crypto.getRandomValues(e)}function Y(){return window.crypto.getRandomValues(V),V[0]}function z(){const e=Date.now(),t=1024*Y()+(1023&Y()),n=new Uint8Array(16),r=Math.trunc(t/s(2,30)),i=t&s(2,30)-1,o=Y();n[0]=e/s(2,40),n[1]=e/s(2,32),n[2]=e/s(2,24),n[3]=e/s(2,16),n[4]=e/s(2,8),n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=o>>>24,n[13]=o>>>16,n[14]=o>>>8,n[15]=o;let u="";for(let s=0;s<n.length;s++)u+=Q.charAt(n[s]>>>4),u+=Q.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(u+="-");return u}function W(e){return l(this,null,function*(){return window.crypto.subtle.exportKey(k,e)})}function Z(){return l(this,null,function*(){const e=yield te(),t={alg:"dir",kty:"oct",k:U(new Uint8Array(e))};return C(JSON.stringify(t))})}function ee(e,t){return l(this,null,function*(){const n=t.split(".");if(5!==n.length)throw v(P,"jwe_length");const r=yield function(e){return l(this,null,function*(){const t=O(e),n=JSON.parse(t).k,r=A(n);return window.crypto.subtle.importKey(H,r,R,!1,[$])})}(e).catch(()=>{throw v(P,"import_key")});try{const e=(new TextEncoder).encode(n[0]),t=A(n[2]),i=A(n[3]),o=A(n[4]),s=8*o.byteLength,u=new Uint8Array(i.length+o.length);u.set(i),u.set(o,i.length);const c=yield window.crypto.subtle.decrypt({name:R,iv:t,tagLength:s,additionalData:e},r,u);return(new TextDecoder).decode(c)}catch(i){throw v(P,"decrypt")}})}function te(){return l(this,null,function*(){const e=yield window.crypto.subtle.generateKey({name:R,length:256},!0,[L,$]);return window.crypto.subtle.exportKey(H,e)})}function ne(e){return l(this,null,function*(){return window.crypto.subtle.importKey(H,e,_,!1,["deriveKey"])})}function re(e,t,n){return l(this,null,function*(){return window.crypto.subtle.deriveKey({name:_,salt:t,hash:I,info:(new TextEncoder).encode(n)},e,{name:R,length:256},!1,[L,$])})}function ie(e,t,n){return l(this,null,function*(){const r=(new TextEncoder).encode(t),i=window.crypto.getRandomValues(new Uint8Array(16)),o=yield re(e,i,n),s=yield window.crypto.subtle.encrypt({name:R,iv:new Uint8Array(12)},o,r);return{data:U(new Uint8Array(s)),nonce:U(i)}})}function oe(e,t,n,r){return l(this,null,function*(){const i=A(r),o=yield re(e,A(t),n),s=yield window.crypto.subtle.decrypt({name:R,iv:new Uint8Array(12)},o,i);return(new TextDecoder).decode(s)})}function se(e){return l(this,null,function*(){const t=yield F(e),n=new Uint8Array(t);return U(n)})}
/*! @azure/msal-browser v4.12.0 2025-05-06 */class ue{constructor(e,t,n){this.logger=e,function(e){if(!window)throw v(K);if(!window.crypto)throw v(S);if(!e&&!window.crypto.subtle)throw v(S,"crypto_subtle_undefined")}(null!=n&&n),this.cache=new E(this.logger),this.performanceClient=t}createNewGuid(){return z()}base64Encode(e){return C(e)}base64Decode(e){return O(e)}base64UrlEncode(e){return T(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}getPublicKeyThumbprint(e){return l(this,null,function*(){var t;const n=null==(t=this.performanceClient)?void 0:t.startMeasurement(h.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=yield function(e,t){return l(this,null,function*(){return window.crypto.subtle.generateKey(B,e,t)})}(ue.EXTRACTABLE,ue.POP_KEY_USAGES),i=yield W(r.publicKey),o=ce({e:i.e,kty:i.kty,n:i.n}),s=yield this.hashString(o),u=yield W(r.privateKey),c=yield function(e,t,n){return l(this,null,function*(){return window.crypto.subtle.importKey(k,e,B,t,n)})}(u,!1,["sign"]);return yield this.cache.setItem(s,{privateKey:c,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),s})}removeTokenBindingKey(e){return l(this,null,function*(){yield this.cache.removeItem(e);return!(yield this.cache.containsKey(e))})}clearKeystore(){return l(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(e,r,i,o){return l(this,null,function*(){var s;const u=null==(s=this.performanceClient)?void 0:s.startMeasurement(h.CryptoOptsSignJwt,o),a=yield this.cache.getItem(r);if(!a)throw v(G);const d=yield W(a.publicKey),y=ce(d),w=T(JSON.stringify({kid:r})),f=D.getShrHeaderString((p=c({},null==i?void 0:i.header),g={alg:d.alg,kid:w},t(p,n(g))));var p,g;const m=T(f);e.cnf={jwk:JSON.parse(y)};const b=`${m}.${T(JSON.stringify(e))}`,K=(new TextEncoder).encode(b),S=yield function(e,t){return l(this,null,function*(){return window.crypto.subtle.sign(B,e,t)})}(a.privateKey,K),k=`${b}.${U(new Uint8Array(S))}`;return u&&u.end({success:!0}),k})}hashString(e){return l(this,null,function*(){return se(e)})}}function ce(e){return JSON.stringify(e,Object.keys(e).sort())}
/*! @azure/msal-browser v4.12.0 2025-05-06 */ue.POP_KEY_USAGES=["sign","verify"],ue.EXTRACTABLE=!0;function le(e,t,n){return l(this,null,function*(){e.addQueueMeasurement(h.GeneratePkceCodes,n);const r=x(ae,h.GenerateCodeVerifier,t,e,n)(e,t,n);return{verifier:r,challenge:yield y(de,h.GenerateCodeChallengeFromVerifier,t,e,n)(r,e,t,n)}})}function ae(e,t,n){try{const r=new Uint8Array(32);x(X,h.GetRandomValues,t,e,n)(r);return U(r)}catch(r){throw v(J)}}function de(e,t,n,r){return l(this,null,function*(){t.addQueueMeasurement(h.GenerateCodeChallengeFromVerifier,r);try{const i=yield y(F,h.Sha256Digest,n,t,r)(e,t,r);return U(new Uint8Array(i))}catch(i){throw v(J)}})}export{ue as C,M as D,j as P,te as a,ee as b,z as c,oe as d,ie as e,le as f,ne as g,se as h,Z as i};
